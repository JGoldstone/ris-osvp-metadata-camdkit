# Example JSON packets for OpenTrackIO - camera tracking data for OSVP

# Notes:
# - There are a number of weaknesses in FreeD that this seeks to address, but it is not
#	 necessarily a replacement for it.
# - The lens distortion model is currently generic to support multiple vendors' models, but
#	 the intention is that a future version will enforce the OpenLensIO model
# - Euler angles are used - for reasoning see metadata spreadsheet and OTP reference
# - For detailed description of the fields, units etc see the accompanying documentation
# - Example packets are given in RAW and PRETTY form

# Next steps:
# - Sign off on the model from RIS group
# - OpenLensIO mathematics review

Simple packet example generated by CamDKit's Mo-Sys F4 reader
RAW
{
  "deviceRecording": true,
  "deviceStatus": "Optical Good",
  "lensCentreShift": {
    "cx": -7.783590793609619,
    "cy": 6.896144866943359
  },
  "lensDistortion": {
    "radial": [
      0.15680991113185883,
      -0.0881580114364624
    ]
  },
  "lensEncoders": {
    "focus": 0.7643280029296875,
    "zoom": 0.0014190673828125
  },
  "lensEntrancePupilDistance": {
    "num": 628748875,
    "denom": 4194304
  },
  "lensFocalLength": 22.349149145829326,
  "lensFocusPosition": 2313,
  "packetId": "urn:uuid:cf00b895-fb0b-4cea-9eff-655ca7f0ade2",
  "protocol": "OpenTrackIO_0.1.0",
  "timingFrameRate": 25.0,
  "timingMode": "internal",
  "timingSequenceNumber": 8,
  "timingSynchronization": {
    "frequency": 25.0,
    "locked": true,
    "source": "genlock",
    "present": true
  },
  "timingTimecode": {
    "hours": 15,
    "minutes": 3,
    "seconds": 47,
    "frames": 3,
    "format": "25"
  },
  "transforms": [
    {
      "translation": {
        "x": -8.101,
        "y": -185.357,
        "z": 119.795
      },
      "rotation": {
        "pan": -3.001,
        "tilt": -28.062,
        "roll": 3.076
      },
      "name": "Camera 0"
    }
  ]
}

PRETTY
{
  "device": {
    "recording": true,
    "status": "Optical Good"
  },
  "lens": {
    "centreShift": {
      "cx": -7.78359,
      "cy": 6.89614
    },
    "distortion": {
      "radial": [
        0.15681,
        -0.08816
      ]
    },
    "encoders": {
      "focus": 0.76433,
      "zoom": 0.00142
    },
    "entrancePupilDistance": 149.905,
    "focalLength": 22.349,
    "focusPosition": 2313
  },
  "packetId": "urn:uuid:c6c07b00-91e6-421a-a5c6-d0b1bc59a1a3",
  "protocol": "OpenTrackIO_0.1.0",
  "timing": {
    "frameRate": 25.0,
    "mode": "internal",
    "sequenceNumber": 7,
    "synchronization": {
      "frequency": 25.0,
      "locked": true,
      "source": "genlock",
      "present": true
    },
    "timecode": "15:03:47:02"
  },
  "transforms": [
    {
      "translation": {
        "x": -8.045,
        "y": -185.355,
        "z": 119.801
      },
      "rotation": {
        "pan": -3.031,
        "tilt": -28.072,
        "roll": 3.096
      },
      "name": "Camera 0"
    }
  ]
}

Static packet example generated by CamDKit generate_static_example.py
RAW
{
  "cameraActiveSensorPhysicalDimensions": {
    "height": 24000,
    "width": 36000
  },
  "cameraAnamorphicSqueeze": 1,
  "cameraId": "A",
  "deviceFirmwareVersion": "3289",
  "deviceMake": "Mo-Sys",
  "deviceModel": "StarTracker Max",
  "deviceSerialNumber": "1234567890A",
  "lensDistortionModel": "OpenLensIO_0.1.0",
  "lensMake": "Canon",
  "lensModel": "HJ14",
  "lensNominalFocalLength": 14,
  "packetId": "urn:uuid:32f2949d-102c-453b-978c-ac2d899def19",
  "protocol": "OpenTrackIO_0.1.0"
}

PRETTY
{
  "camera": {
    "activeSensorPhysicalDimensions": {
      "height": 24.0,
      "width": 36.0
    },
    "anamorphicSqueeze": 1,
    "id": "A"
  },
  "device": {
    "firmwareVersion": "3289",
    "make": "Mo-Sys",
    "model": "StarTracker Max",
    "serialNumber": "1234567890A"
  },
  "lens": {
    "distortionModel": "OpenLensIO_0.1.0",
    "make": "Canon",
    "model": "HJ14",
    "nominalFocalLength": 14
  },
  "packetId": "urn:uuid:32f2949d-102c-453b-978c-ac2d899def19",
  "protocol": "OpenTrackIO_0.1.0"
}

Complex packet example generated by CamDKit generate_dynamic_example.py
RAW
{
  "deviceNotes": "Example generated packet.",
  "deviceRecording": false,
  "deviceSlate": "A101_A_4",
  "deviceStatus": "Optical Good",
  "globalStage": {
    "E": 100.0,
    "N": 200.0,
    "U": 300.0,
    "lat0": 100.0,
    "lon0": 200.0,
    "h0": 300.0
  },
  "lensCentreShift": {
    "cx": 1.0,
    "cy": 2.0
  },
  "lensCustom": [
    1.0,
    2.0
  ],
  "lensDistortion": {
    "radial": [
      1.0,
      2.0,
      3.0
    ],
    "tangential": [
      1.0,
      2.0
    ]
  },
  "lensEncoders": {
    "focus": 0.1,
    "iris": 0.2,
    "zoom": 0.3
  },
  "lensEntrancePupilDistance": {
    "num": 10,
    "denom": 1
  },
  "lensExposureFalloff": {
    "a1": 1.0,
    "a2": 2.0,
    "a3": 3.0
  },
  "lensFStop": 4000,
  "lensFocalLength": 24.305,
  "lensFocusPosition": 1000,
  "lensFovScale": {
    "horizontal": 1.0,
    "vertical": 1.0
  },
  "lensPerspectiveShift": {
    "Cx": 0.1,
    "Cy": 0.2
  },
  "lensTStop": 4100,
  "lensUndistortion": {
    "radial": [
      1.0,
      2.0,
      3.0
    ],
    "tangential": [
      1.0,
      2.0
    ]
  },
  "packetId": "urn:uuid:c0704a78-136e-4d5c-9174-4540aef749a5",
  "protocol": "OpenTrackIO_0.1.0",
  "relatedPackets": [
    "urn:uuid:75807b3c-4d95-48e5-8030-4cf52ff43746",
    "urn:uuid:28646a69-acad-4599-9c75-cc5e36f2228b"
  ],
  "timingFrameRate": 23.976,
  "timingMode": "internal",
  "timingRecordedTimestamp": {
    "seconds": 1718806000,
    "nanoseconds": 0
  },
  "timingSampleTimestamp": {
    "seconds": 1718806554,
    "nanoseconds": 0,
    "attoseconds": 0
  },
  "timingSequenceNumber": 0,
  "timingSynchronization": {
    "frequency": 23.976,
    "locked": true,
    "source": "ptp",
    "offsets": {
      "translation": 1.0,
      "rotation": 2.0,
      "encoders": 3.0
    },
    "present": true,
    "ptp_master": "00:11:22:33:44:55",
    "ptp_offset": 0.0,
    "ptp_domain": 1
  },
  "timingTimecode": {
    "hours": 1,
    "minutes": 2,
    "seconds": 3,
    "frames": 4,
    "format": "24D"
  },
  "transforms": [
    {
      "translation": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "rotation": {
        "pan": 0,
        "tilt": 0,
        "roll": 0
      },
      "name": "Dolly"
    },
    {
      "translation": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "rotation": {
        "pan": 1.0,
        "tilt": 2.0,
        "roll": 3.0
      },
      "scale": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "name": "Crane Arm",
      "parent": "Dolly"
    },
    {
      "translation": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "rotation": {
        "pan": 1.0,
        "tilt": 2.0,
        "roll": 3.0
      },
      "scale": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "name": "Camera",
      "parent": "Crane Arm"
    }
  ]
}

PRETTY
{
  "device": {
    "notes": "Example generated packet.",
    "recording": false,
    "slate": "A101_A_4",
    "status": "Optical Good"
  },
  "globalStage": {
    "E": 100.0,
    "N": 200.0,
    "U": 300.0,
    "lat0": 100.0,
    "lon0": 200.0,
    "h0": 300.0
  },
  "lens": {
    "centreShift": {
      "cx": 1.0,
      "cy": 2.0
    },
    "custom": [
      1.0,
      2.0
    ],
    "distortion": {
      "radial": [
        1.0,
        2.0,
        3.0
      ],
      "tangential": [
        1.0,
        2.0
      ]
    },
    "encoders": {
      "focus": 0.1,
      "iris": 0.2,
      "zoom": 0.3
    },
    "entrancePupilDistance": 10.0,
    "exposureFalloff": {
      "a1": 1.0,
      "a2": 2.0,
      "a3": 3.0
    },
    "fStop": "F4.0",
    "focalLength": 24.305,
    "focusPosition": 1000,
    "fovScale": {
      "horizontal": 1.0,
      "vertical": 1.0
    },
    "perspectiveShift": {
      "Cx": 0.1,
      "Cy": 0.2
    },
    "tStop": "T4.1",
    "undistortion": {
      "radial": [
        1.0,
        2.0,
        3.0
      ],
      "tangential": [
        1.0,
        2.0
      ]
    }
  },
  "packetId": "urn:uuid:c0704a78-136e-4d5c-9174-4540aef749a5",
  "protocol": "OpenTrackIO_0.1.0",
  "relatedPackets": [
    "urn:uuid:75807b3c-4d95-48e5-8030-4cf52ff43746",
    "urn:uuid:28646a69-acad-4599-9c75-cc5e36f2228b"
  ],
  "timing": {
    "frameRate": 23.976,
    "mode": "internal",
    "recordedTimestamp": {
      "seconds": 1718806000,
      "nanoseconds": 0
    },
    "sampleTimestamp": {
      "seconds": 1718806554,
      "nanoseconds": 0,
      "attoseconds": 0
    },
    "sequenceNumber": 0,
    "synchronization": {
      "frequency": 23.976,
      "locked": true,
      "source": "ptp",
      "offsets": {
        "translation": 1.0,
        "rotation": 2.0,
        "encoders": 3.0
      },
      "present": true,
      "ptp_master": "00:11:22:33:44:55",
      "ptp_offset": 0.0,
      "ptp_domain": 1
    },
    "timecode": "01:02:03:04"
  },
  "transforms": [
    {
      "translation": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "rotation": {
        "pan": 0,
        "tilt": 0,
        "roll": 0
      },
      "name": "Dolly"
    },
    {
      "translation": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "rotation": {
        "pan": 1.0,
        "tilt": 2.0,
        "roll": 3.0
      },
      "scale": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "name": "Crane Arm",
      "parent": "Dolly"
    },
    {
      "translation": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "rotation": {
        "pan": 1.0,
        "tilt": 2.0,
        "roll": 3.0
      },
      "scale": {
        "x": 1.0,
        "y": 2.0,
        "z": 3.0
      },
      "name": "Camera",
      "parent": "Crane Arm"
    }
  ]
}
