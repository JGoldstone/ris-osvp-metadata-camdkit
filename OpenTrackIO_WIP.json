# Example JSON packets for OpenTrackIO - camera tracking data for OSVP

# Notes:
# - This specifically only describes data that may change every frame (hence no 'vendor' etc)
# - There are a number of weaknesses in FreeD that this seeks to address, but it is not
#	 necessarily a replacement for it.
# - The lens distortion model is currently generic to support multiple vendors' models, but
#	 the intention is that a future version will enforce the OpenLensIO model
# - Euler angles are used - for reasoning see metadata spreadsheet and OTP reference
# - For detailed description of the fields, units etc see theaccompanying documentation

# Next steps:
# - Finalise the model addressing the various questions below
# - Generate the JSON Schema from CamDKit and review

# OPENTRACKIO

# Simple packet example (without comments and valid json, generated by CamDKit Mo-Sys reader)
{
	"lens": {
		"centreShift": {
			"cx": -7.783590793609619,
			"cy": 6.896144866943359
		},
		"distortion": {
		"radial": [
			0.15680991113185883,
			-0.0881580114364624
		]
		},
		"encoders": {
			"focus": 0.7643280029296875,
			"zoom": 0.0014190673828125
		},
		"entrancePupilPosition": {
			"num": 628748875,
			"denom": 4194304
		},
		"focalLength": 22.349149145829326,
		"focusPosition": 2313
	},
	"metadata": {
		"recording": true,
		"status": "Optical Good"
	},
	"packetId": "urn:uuid:a02ee3a4-2324-4110-9604-4f035eed0427",
	"protocol": "OpenTrackIO_0.1.0",
	"timing": {
		"frameRate": 25.0,
		"mode": "internal",
		"sequenceNumber": 1,
		"synchronization": {
			"frequency": 25.0,
			"locked": true,
			"source": "genlock",
			"present": true
		},
		"timecode": {
			"hours": 15,
			"minutes": 3,
			"seconds": 47,
			"frames": 12,
			"format": "25"
		}
	},
	"transforms": [
		{
			"translation": {
				"x": -8.121,
				"y": -185.36,
				"z": 119.803
			},
			"rotation": {
				"pan": -2.969,
				"tilt": -28.03,
				"roll": 3.1
			},
			"name": "Camera 0"
		}
	]
}

# Static packet example with notes (generated by CamDKit generate_static_example.py)
{
	"camera": {
		"activeSensorPhysicalDimensions": {
			"height": 36000,
			"width": 24000
		},
		"anamorphicSqueeze": 2,
		"cameraId": "A"
	},
	"device": {
		"deviceFirmwareVersion": "3289",
		"deviceMake": "Mo-Sys",
		"deviceModel": "StarTracker Max",
		"deviceSerialNumber": "1234567890A"
	},
	"lens": {
		"distortionModel": "OpenLensIO_0.1.0",
		"make": "Canon",
		"model": "HJ14"
	},
	"packetId": "urn:uuid:c93ac5ee-3a94-45bb-a49e-4546028aaecb",
	"protocol": "OpenTrackIO_0.1.0"
}

# Complex packet example (generated by CamDKit generate_dynamic_example.py)
{
	"lens": {
		"centreShift": {
			"cx": 1.0,
			"cy": 2.0
		},
		"custom": [
			1.0,
			2.0
		],
		"distortion": {
			"radial": [
				1.0,
				2.0,
				3.0
			],
			"tangential": [
				1.0,
				2.0
			]
		},
		"encoders": {
			"focus": 0.1,
			"iris": 0.2,
			"zoom": 0.3
		},
		"entrancePupilPosition": {
			"num": 10,
			"denom": 1
		},
		"exposureFalloff": {
			"a1": 1.0,
			"a2": 2.0,
			"a3": 3.0
		},
		"fStop": 4000,
		"focalLength": 24.0,
		"focusPosition": 1000,
		"fovScale": {
			"horizontal": 1.0,
			"vertical": 1.0
		},
		"perspectiveShift": {
			"Cx": 0.1,
			"Cy": 0.2
		},
		"tStop": 4100,
		"undistortion": {
			"radial": [
				1.0,
				2.0,
				3.0
			],
			"tangential": [
				1.0,
				2.0
			]
		}
	},
	"metadata": {
		"globalStage": {
			"E": 100.0,
			"N": 200.0,
			"U": 300.0,
			"lat0": 100.0,
			"lon0": 200.0,
			"h0": 300.0
		},
		"notes": "Example generated packet.",
		"recording": false,
		"relatedPackets": [
			"urn:uuid:bf391f45-6240-4bff-a5b4-dd18d39d43a8",
			"urn:uuid:a55eb29b-af70-4f1d-8712-f3318d3217a1"
		],
		"slate": "A101_A_4",
		"status": "Optical Good"
	},
	"packetId": "urn:uuid:40afab4b-30e8-4c9a-b3de-13bb90f391d4",
	"protocol": "OpenTrackIO_0.1.0",
	"timing": {
		"frameRate": 23.976,
		"mode": "internal",
		"recordedTimestamp": {
			"seconds": 1718806000,
			"nanoseconds": 0
		},
		"sequenceNumber": 0,
		"synchronization": {
			"frequency": 23.976,
			"locked": true,
			"source": "ptp",
			"offsets": {
				"translation": 1.0,
				"rotation": 2.0,
				"encoders": 3.0
			},
			"present": true,
			"ptp_master": "00:11:22:33:44:55",
			"ptp_offset": 0.0,
			"ptp_domain": 1
		},
		"timecode": {
			"hours": 1,
			"minutes": 2,
			"seconds": 3,
			"frames": 4,
			"format": "24D"
		},
		"timestamp": {
			"seconds": 1718806554,
			"nanoseconds": 0,
			"attoseconds": 0
		}
	},
	"transforms": [
		{
			"translation": {
				"x": 1.0,
				"y": 2.0,
				"z": 3.0
			},
			"rotation": {
				"pan": 0,
				"tilt": 0,
				"roll": 0
			},
			"name": "Dolly"
		},
		{
			"translation": {
				"x": 1.0,
				"y": 2.0,
				"z": 3.0
			},
			"rotation": {
				"pan": 1.0,
				"tilt": 2.0,
				"roll": 3.0
			},
			"scale": {
				"x": 1.0,
				"y": 2.0,
				"z": 3.0
			},
			"name": "Crane Arm",
			"parent": "Dolly"
		},
		{
			"translation": {
				"x": 1.0,
				"y": 2.0,
				"z": 3.0
			},
			"rotation": {
				"pan": 1.0,
				"tilt": 2.0,
				"roll": 3.0
			},
			"scale": {
				"x": 1.0,
				"y": 2.0,
				"z": 3.0
			},
			"name": "Camera",
			"parent": "Crane Arm"
		}
	],
	"custom": {
		"pot1": 2435,
		"button1": false
	}
}
